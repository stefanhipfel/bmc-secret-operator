apiVersion: bmc.ironcore.dev/v1alpha1
kind: BMCSecret
metadata:
  name: team-a-bmc-credentials
  namespace: default
  labels:
    # Global sync label (if required by SecretBackendConfig)
    bmc-secret-operator.metal.ironcore.dev/sync: "true"
    # Team label - matches secretEngines[].syncLabel: "team=a"
    team: a
    # Additional labels for organization
    environment: production
    region: us-west
spec:
  # BMC selector - finds BMC resources to sync
  bmcSelector:
    matchLabels:
      team: a
      environment: production

  # Reference to secret containing BMC credentials
  credentialsRef:
    name: bmc-admin-credentials
    namespace: default
    usernameKey: username
    passwordKey: password

---
apiVersion: bmc.ironcore.dev/v1alpha1
kind: BMCSecret
metadata:
  name: team-b-bmc-credentials
  namespace: default
  labels:
    # Global sync label (if required by SecretBackendConfig)
    bmc-secret-operator.metal.ironcore.dev/sync: "true"
    # Team label - matches secretEngines[].syncLabel: "team=b"
    team: b
    # Additional labels
    environment: development
    region: eu-central
spec:
  bmcSelector:
    matchLabels:
      team: b
      environment: development

  credentialsRef:
    name: bmc-dev-credentials
    namespace: default
    usernameKey: username
    passwordKey: password

---
apiVersion: bmc.ironcore.dev/v1alpha1
kind: BMCSecret
metadata:
  name: critical-system-bmc
  namespace: default
  labels:
    # Global sync label
    bmc-secret-operator.metal.ironcore.dev/sync: "true"
    # Multiple team labels - will sync to multiple engines
    team: a
    critical: "yes"
    environment: production
spec:
  # This BMCSecret will sync to BOTH:
  # 1. team-a-prod engine (matches team=a)
  # 2. critical-systems engine (matches critical label with any value)
  bmcSelector:
    matchLabels:
      critical: "yes"

  credentialsRef:
    name: critical-bmc-credentials
    namespace: default
    usernameKey: username
    passwordKey: password
